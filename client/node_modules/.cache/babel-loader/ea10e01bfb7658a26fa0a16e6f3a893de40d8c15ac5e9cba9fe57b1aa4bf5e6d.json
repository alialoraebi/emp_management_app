{"ast":null,"code":"import React,{useState,useContext}from'react';import axios from'axios';import{Link,useNavigate}from'react-router-dom';import{AuthContext}from'./AuthContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Login(){const{logIn}=useContext(AuthContext);const navigate=useNavigate();const[formData,setFormData]=useState({username:'',password:''});const[errorMessage,setErrorMessage]=useState('');const handleChange=e=>{const updatedFormData={...formData,[e.target.name]:e.target.value};setFormData(updatedFormData);};const handleSubmit=async e=>{e.preventDefault();if(!formData.username||!formData.password){setErrorMessage('Please fill in all fields.');return;}try{const response=await axios.post('http://localhost:3000/api/v1/user/login',formData);console.log(response.data);setErrorMessage('');logIn();navigate('/employees');// Navigate to \"/employees\" after a successful login\n}catch(error){console.error(\"Error during login:\",error);if(error.response&&error.response.data){console.log('Error message:',error.response.data.message);setErrorMessage(error.response.data.message);}else{setErrorMessage('An error occurred. Please try again later.');}}};return/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"login-form\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"username\",value:formData.username,onChange:handleChange,placeholder:\"Username\",className:\"form-input\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",value:formData.password,onChange:handleChange,placeholder:\"Password\",className:\"form-input\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"submit-button\",children:\"Login\"}),errorMessage&&/*#__PURE__*/_jsxs(\"p\",{className:\"error-message\",children:[errorMessage,errorMessage.includes('User not found')&&/*#__PURE__*/_jsxs(\"span\",{children:[\" \",/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"signup-link\",children:\"Sign up here\"}),\".\"]})]})]});}export default Login;","map":{"version":3,"names":["React","useState","useContext","axios","Link","useNavigate","AuthContext","jsx","_jsx","jsxs","_jsxs","Login","logIn","navigate","formData","setFormData","username","password","errorMessage","setErrorMessage","handleChange","e","updatedFormData","target","name","value","handleSubmit","preventDefault","response","post","console","log","data","error","message","onSubmit","className","children","type","onChange","placeholder","includes","to"],"sources":["/Users/ali/Desktop/George Brown/Fall 2023/COMP3123 (Full Stack Development)/assignment2/client/src/components/Login.js"],"sourcesContent":["import React, { useState, useContext} from 'react';\nimport axios from 'axios';\nimport { Link, useNavigate } from 'react-router-dom'; \nimport { AuthContext } from './AuthContext';\n\n\nfunction Login() {\n    const { logIn } = useContext(AuthContext);\n    const navigate = useNavigate(); \n\n\n    const [formData, setFormData] = useState({\n        username: '',\n        password: ''\n    });\n    const [errorMessage, setErrorMessage] = useState('');\n\n    const handleChange = (e) => {\n        const updatedFormData = { ...formData, [e.target.name]: e.target.value };\n        setFormData(updatedFormData);\n    };\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        if (!formData.username || !formData.password) {\n          setErrorMessage('Please fill in all fields.');\n          return;\n        }\n        try {\n          const response = await axios.post('http://localhost:3000/api/v1/user/login', formData);\n          console.log(response.data);\n          setErrorMessage(''); \n          logIn();\n          navigate('/employees'); // Navigate to \"/employees\" after a successful login\n        } catch (error) {\n          console.error(\"Error during login:\", error);\n          if (error.response && error.response.data) {\n            console.log('Error message:', error.response.data.message); \n            setErrorMessage(error.response.data.message);\n          } else {\n            setErrorMessage('An error occurred. Please try again later.');\n          }\n        }\n      };\n\n      return (\n        <form onSubmit={handleSubmit} className=\"login-form\">\n          <input\n            type=\"text\"\n            name=\"username\"\n            value={formData.username}\n            onChange={handleChange}\n            placeholder=\"Username\"\n            className=\"form-input\"\n          />\n          <input\n            type=\"password\"\n            name=\"password\"\n            value={formData.password}\n            onChange={handleChange}\n            placeholder=\"Password\"\n            className=\"form-input\"\n          />\n          <button type=\"submit\" className=\"submit-button\">Login</button>\n      \n          {errorMessage && (\n            <p className=\"error-message\">\n              {errorMessage}\n              {errorMessage.includes('User not found') && (\n                <span> <Link to=\"/\" className=\"signup-link\">Sign up here</Link>.</span>\n              )}\n            </p>\n          )}\n        </form>\n      );\n}\n\nexport default Login;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}