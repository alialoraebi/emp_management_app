{"ast":null,"code":"import React,{useState,useEffect,useContext}from'react';import axios from'axios';import{Link,useNavigate}from'react-router-dom';import{AuthContext}from'./AuthContext';import'../App.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function EmployeeList(){const[employees,setEmployees]=useState([]);const{isLoggedIn}=useContext(AuthContext);const navigate=useNavigate();useEffect(()=>{const fetchEmployees=async()=>{try{const response=await axios.get('http://localhost:3000/api/v1/emp/employees');setEmployees(response.data);}catch(error){console.error('Error fetching employees:',error);}};fetchEmployees();},[]);if(!isLoggedIn){return/*#__PURE__*/_jsx(\"p\",{children:\"You must be logged in to view this page.\"});}const deleteEmployee=async id=>{if(window.confirm('Are you sure you want to delete this employee?')){try{await axios.delete(\"http://localhost:3000/api/v1/emp/employees/\".concat(id));setEmployees(employees.filter(employee=>employee._id!==id));}catch(error){console.error('Error deleting employee:',error);}}};return/*#__PURE__*/_jsxs(\"div\",{className:\"employee-list\",children:[/*#__PURE__*/_jsxs(\"table\",{className:\"employee-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"First Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Last Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:employees.map(employee=>/*#__PURE__*/_jsxs(\"tr\",{className:\"employee-row\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"employee-first-name\",children:employee.first_name}),/*#__PURE__*/_jsx(\"td\",{className:\"employee-last-name\",children:employee.last_name}),/*#__PURE__*/_jsx(\"td\",{className:\"employee-email\",children:employee.email}),/*#__PURE__*/_jsxs(\"td\",{className:\"employee-actions\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(\"/update-employee/\".concat(employee._id)),className:\"update-button\",children:\"Update\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteEmployee(employee._id),className:\"delete-button\",children:\"Delete\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(\"/view-employee/\".concat(employee._id)),className:\"view-button\",children:\"View\"})]})]},employee._id))})]}),/*#__PURE__*/_jsx(Link,{to:\"/add-employee\",className:\"add-employee-link\",children:\"Add Employee\"})]});}export default EmployeeList;","map":{"version":3,"names":["React","useState","useEffect","useContext","axios","Link","useNavigate","AuthContext","jsx","_jsx","jsxs","_jsxs","EmployeeList","employees","setEmployees","isLoggedIn","navigate","fetchEmployees","response","get","data","error","console","children","deleteEmployee","id","window","confirm","delete","concat","filter","employee","_id","className","map","first_name","last_name","email","onClick","to"],"sources":["/Users/ali/Desktop/George Brown/Fall 2023/COMP3123 (Full Stack Development)/assignment2/client/src/components/EmployeeList.js"],"sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\nimport axios from 'axios';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { AuthContext } from './AuthContext';\nimport '../App.css';\n\nfunction EmployeeList() {\n    const [employees, setEmployees] = useState([]);\n    const { isLoggedIn } = useContext(AuthContext);\n    const navigate = useNavigate();\n\n    useEffect(() => {\n        const fetchEmployees = async () => {\n            try {\n                const response = await axios.get('http://localhost:3000/api/v1/emp/employees');\n                setEmployees(response.data);\n            } catch (error) {\n                console.error('Error fetching employees:', error);\n            }\n        };\n\n        fetchEmployees();\n    }, []);\n\n    if (!isLoggedIn) {\n        return <p>You must be logged in to view this page.</p>;\n    }\n\n    const deleteEmployee = async (id) => {\n        if (window.confirm('Are you sure you want to delete this employee?')) {\n          try {\n            await axios.delete(`http://localhost:3000/api/v1/emp/employees/${id}`);\n            setEmployees(employees.filter((employee) => employee._id !== id));\n          } catch (error) {\n            console.error('Error deleting employee:', error);\n          }\n        }\n      };\n\n    return (\n        <div className=\"employee-list\">\n            <table className=\"employee-table\">\n                <thead>\n                    <tr>\n                        <th>First Name</th>\n                        <th>Last Name</th>\n                        <th>Email</th>\n                        <th>Actions</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    {employees.map((employee) => (\n                        <tr key={employee._id} className=\"employee-row\">\n                            <td className=\"employee-first-name\">{employee.first_name}</td>\n                            <td className=\"employee-last-name\">{employee.last_name}</td>\n                            <td className=\"employee-email\">{employee.email}</td>\n                            <td className=\"employee-actions\">\n                                <button onClick={() => navigate(`/update-employee/${employee._id}`)} className=\"update-button\">Update</button>\n                                <button onClick={() => deleteEmployee(employee._id)} className=\"delete-button\">Delete</button>\n                                <button onClick={() => navigate(`/view-employee/${employee._id}`)} className=\"view-button\">View</button>\n                            </td>\n                        </tr>\n                    ))}\n                </tbody>\n            </table>\n            <Link to=\"/add-employee\" className=\"add-employee-link\">Add Employee</Link>\n\n        </div>\n    );\n}\n\nexport default EmployeeList;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}